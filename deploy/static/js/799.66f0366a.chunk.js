"use strict";(self.webpackChunkpsbeauty=self.webpackChunkpsbeauty||[]).push([[799],{6427:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(1413),i=t(4942),l=t(4925),o="Header_wrapper__e2tXX",a="Header_large__tDbDa",c="Header_small__U9DHq",s="Header_back__Chgho",d="Header_title__87Ruw",u="Header_has-back__h6eqr",v=t(1694),f=t.n(v),m=t(9411),C=t(6871),_=t(184),h=["style"],g=function(e){var n,t=e.style,v=void 0===t?{}:t,g=(0,l.Z)(e,h),p=(0,C.s0)(),Z=(0,C.UO)().text;return(0,_.jsxs)("div",{className:f()(o,g.className,(n={},(0,i.Z)(n,a,g.title||g.children),(0,i.Z)(n,c,!g.title&&!g.leftArrow),n)),style:(0,r.Z)({},v),children:[g.leftArrow&&(0,_.jsx)("div",{onClick:function(){return g.redirect?g.redirect():p(Z?-2:-1)},children:(0,_.jsx)(m.Z,{className:s,name:"LeftArrow"})}),g.title?(0,_.jsx)("div",{className:f()(d,(0,i.Z)({},u,g.leftArrow)),children:g.title}):g.children]})}},897:function(e,n,t){t.d(n,{Z:function(){return y}});var r,i,l=t(885),o=t(2791),a="CaseCard_wrapper__dUXdB",c="CaseCard_title__SQCWW",s="CaseCard_collect-block__u8Sal",d="CaseCard_bookmark-fill__jUiSM",u="CaseCard_bookmark-simple__hWI99",v="CaseCard_amount__zwm+S",f="CaseCard_clinic__lyURc",m="CaseCard_content__aYMVJ",C="CaseCard_image__oTTZQ",_="CaseCard_tags__7Hmha",h=t(9411),g=t(8163),p=t(8820),Z=t(4874),I=t(1413),x=t(168),j=t(7743),b=t(4376),k={},M=(0,j.Ps)(r||(r=(0,x.Z)(["\n  mutation CollectCase($caseId: String!) {\n    collectCase(input: { caseId: $caseId }) {\n      userId\n      collectedCount\n    }\n  }\n"])));var N=(0,j.Ps)(i||(i=(0,x.Z)(["\n  mutation RemoveCollectedCase($caseId: String!) {\n    removeCollectedCase(input: { caseId: $caseId }) {\n      userId\n      collectedCount\n    }\n  }\n"])));var S=t(184),w="case-card-width",y=function(e){var n,t=Object.assign({},e),r=(0,g.Z)(),i=(0,p.aC)(),x=(0,o.useRef)(null),j=(0,o.useState)(parseInt(sessionStorage.getItem(w)||"",10)||0),y=(0,l.Z)(j,2),E=y[0],R=y[1],H=(0,o.useState)(!1),D=(0,l.Z)(H,2),A=D[0],L=D[1],O=(0,o.useState)(t.amount),P=(0,l.Z)(O,2),U=P[0],W=P[1],q=(0,Z.Z)({}),F=q.containerRef,Q=q.isVisible;(0,o.useLayoutEffect)((function(){x.current&&(R(x.current.clientWidth),sessionStorage.setItem(w,"".concat(x.current.clientWidth)))}),[]),(0,o.useEffect)((function(){t.last&&Q&&t.fetchMore&&t.fetchMore()}),[t.last,t.fetchMore,Q]);var V=function(e){var n=(0,I.Z)((0,I.Z)({},k),e);return b.D(M,n)}({variables:{caseId:t.caseId},onCompleted:function(e){var n;L(!0),W(null===(n=e.collectCase)||void 0===n?void 0:n.collectedCount)}}),$=(0,l.Z)(V,1)[0],B=function(e){var n=(0,I.Z)((0,I.Z)({},k),e);return b.D(N,n)}({variables:{caseId:t.caseId},onCompleted:function(e){var n;L(!1),W(null===e||void 0===e||null===(n=e.removeCollectedCase)||void 0===n?void 0:n.collectedCount)}}),T=(0,l.Z)(B,1)[0];return(0,o.useEffect)((function(){L(t.isCollected)}),[t.isCollected]),(0,S.jsxs)("div",{ref:t.last?F:null,className:a,style:t.style,onClick:function(){return r.toClinicCase({clinicId:t.clinicId,caseId:t.caseId})},children:[(0,S.jsx)("div",{className:c,children:t.title}),(0,S.jsx)("div",{className:f,children:t.clinic}),(0,S.jsx)("div",{className:m,dangerouslySetInnerHTML:{__html:t.introduction||""}}),(0,S.jsx)("div",{className:C,style:{height:E},ref:x,children:(0,S.jsx)("img",{src:t.image})}),(0,S.jsx)("div",{className:_,children:null===(n=t.tags)||void 0===n?void 0:n.map((function(e,n){return(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:"#"}),e]},"tag-".concat(n))}))}),(0,S.jsxs)("div",{className:s,onClick:function(e){if(e.stopPropagation(),!i.user.id)return r.toSignIn();A?T():$()},children:[A?(0,S.jsx)(h.Z,{name:"BookmarkFill",className:d}):(0,S.jsx)(h.Z,{name:"BookmarkSimple",className:u}),(0,S.jsx)("div",{className:v,children:U})]})]})}},4874:function(e,n,t){var r=t(885),i=t(2791);n.Z=function(e){var n=e.root,t=void 0===n?null:n,l=e.rootMargin,o=void 0===l?"0px":l,a=e.threshold,c=void 0===a?1:a,s=(0,i.useState)(!1),d=(0,r.Z)(s,2),u=d[0],v=d[1],f=(0,i.useRef)(null),m=(0,i.useCallback)((function(e){f.current=e,v(!!e)}),[]),C=(0,i.useState)(!1),_=(0,r.Z)(C,2),h=_[0],g=_[1];return(0,i.useEffect)((function(){if(u){var e=new IntersectionObserver((function(e){var n=(0,r.Z)(e,1)[0];g(n.isIntersecting)}),{root:t,rootMargin:o,threshold:c});return(null===f||void 0===f?void 0:f.current)&&e.observe(f.current),function(){(null===f||void 0===f?void 0:f.current)&&e.unobserve(f.current)}}}),[t,o,c,u]),{containerRef:m,isVisible:h}}},3180:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r,i=t(4942),l=t(1694),o=t.n(l),a="MemberCollectClinicalCase_wrapper__NGknA",c="MemberCollectClinicalCase_empty-card__xOFQq",s="MemberCollectClinicalCase_empty__xFrZ4",d=t(6427),u=t(897),v=t(1413),f=t(168),m=t(7743),C=t(6578),_={},h=(0,m.Ps)(r||(r=(0,f.Z)(["\n  query GetMe {\n    me {\n      userCollectedCases {\n        id\n        title\n        description\n        image\n        clinic {\n          id\n          name\n        }\n        categories {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));var g=t(2103),p=t(184),Z=function(){var e,n,t,r,l=function(e){var n=(0,v.Z)((0,v.Z)({},_),e);return C.a(h,n)}({fetchPolicy:"no-cache"}),f=l.data,m=l.loading,Z=l.error;return m?(0,p.jsx)(g.Z.Loading,{}):Z?(0,p.jsx)(g.Z.Error,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Z,{title:"\u6536\u85cf\u6848\u4f8b",leftArrow:!0}),(0,p.jsxs)("div",{className:o()(a,(0,i.Z)({},s,!(null!==f&&void 0!==f&&null!==(e=f.me)&&void 0!==e&&null!==(n=e.userCollectedCases)&&void 0!==n&&n.length))),children:[(0,p.jsx)("div",{className:c,children:"\u5c1a\u7121\u6536\u85cf\u6848\u4f8b"}),null===f||void 0===f||null===(t=f.me)||void 0===t||null===(r=t.userCollectedCases)||void 0===r?void 0:r.map((function(e){var n,t,r;return(0,p.jsx)(u.Z,{isCollected:!0,title:(null===e||void 0===e?void 0:e.title)||"",clinic:(null===e||void 0===e||null===(n=e.clinic)||void 0===n?void 0:n.name)||"",clinicId:(null===e||void 0===e||null===(t=e.clinic)||void 0===t?void 0:t.id)||"",introduction:(null===e||void 0===e?void 0:e.description)||"",image:(null===e||void 0===e?void 0:e.image)||"",tags:null===e||void 0===e||null===(r=e.categories)||void 0===r?void 0:r.map((function(e){return(null===e||void 0===e?void 0:e.name)||""})),caseId:(null===e||void 0===e?void 0:e.id)||"",last:!1},null===e||void 0===e?void 0:e.id)}))]})]})}},4376:function(e,n,t){t.d(n,{D:function(){return d}});var r=t(9388),i=t(2791),l=t(3124),o=t(5970),a=t(2364),c=t(9484),s=t(5046);function d(e,n){var t=(0,s.x)(null===n||void 0===n?void 0:n.client);(0,a.Vp)(e,a.n_.Mutation);var d=(0,i.useState)({called:!1,loading:!1,client:t}),u=d[0],v=d[1],f=(0,i.useRef)({result:u,mutationId:0,isMounted:!0,client:t,mutation:e,options:n});Object.assign(f.current,{client:t,options:n,mutation:e});var m=(0,i.useCallback)((function(e){void 0===e&&(e={});var n=f.current,t=n.client,i=n.options,a=n.mutation,s=(0,r.pi)((0,r.pi)({},i),{mutation:a});f.current.result.loading||s.ignoreResults||v(f.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var d=++f.current.mutationId,u=(0,l.J)(s,e);return t.mutate(u).then((function(n){var r,i,l,a=n.data,s=n.errors,m=s&&s.length>0?new c.c({graphQLErrors:s}):void 0;if(d===f.current.mutationId&&!u.ignoreResults){var C={called:!0,loading:!1,data:a,error:m,client:t};f.current.isMounted&&!(0,o.D)(f.current.result,C)&&v(f.current.result=C)}return null===(i=null===(r=f.current.options)||void 0===r?void 0:r.onCompleted)||void 0===i||i.call(r,n.data),null===(l=e.onCompleted)||void 0===l||l.call(e,n.data),n})).catch((function(n){var r,i,l,a;if(d===f.current.mutationId&&f.current.isMounted){var c={loading:!1,error:n,data:void 0,called:!0,client:t};(0,o.D)(f.current.result,c)||v(f.current.result=c)}if((null===(r=f.current.options)||void 0===r?void 0:r.onError)||u.onError)return null===(l=null===(i=f.current.options)||void 0===i?void 0:i.onError)||void 0===l||l.call(i,n),null===(a=e.onError)||void 0===a||a.call(e,n),{data:void 0,errors:n};throw n}))}),[]),C=(0,i.useCallback)((function(){v({called:!1,loading:!1,client:t})}),[]);return(0,i.useEffect)((function(){return f.current.isMounted=!0,function(){f.current.isMounted=!1}}),[]),[m,(0,r.pi)({reset:C},u)]}}}]);
//# sourceMappingURL=799.66f0366a.chunk.js.map