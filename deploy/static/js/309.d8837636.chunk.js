"use strict";(self.webpackChunkpsbeauty=self.webpackChunkpsbeauty||[]).push([[309],{4433:function(n,e,t){t.d(e,{Z:function(){return k}});var o=t(4925),r=t(7467),c=t(184),i=["open","backdrop"],a=function(n){var e=n.open,t=void 0!==e&&e,a=n.backdrop,l=void 0===a||a,s=(0,o.Z)(n,i);return(0,c.jsx)(r.Z,{modal:!0,nested:!0,lockScroll:!0,open:t,closeOnDocumentClick:l,closeOnEscape:!0,onClose:s.onClose,contentStyle:{background:"transparent",border:"none",width:"auto"},overlayStyle:{backgroundColor:"#091e428a"},children:s.children})},l=t(1694),s=t.n(l),u="ModalDialog_wrapper__SJQv5",d=function(n){return(0,c.jsx)("div",{className:s()(u,n.className),style:n.style,children:n.children})},f="ModalHeader_wrapper__tVVhd",m=function(n){return(0,c.jsxs)("header",{className:s()(f,n.className),style:n.style,children:[(0,c.jsx)("h1",{children:n.title}),n.children]})},v="ModalBody_main__yFQS5",p=function(n){return(0,c.jsx)("main",{className:s()(v,n.className),style:n.style,children:n.children||n.content})},C=t(4942),h="ModalFooter_wrapper__eBzg3",x="ModalFooter_disabled__U85L9",Z=function(n){var e,t;return(0,c.jsxs)("footer",{className:s()(h,n.className),style:n.style,children:[!!n.cancelText&&(0,c.jsx)("div",{onClick:function(){n.onCancel&&n.onCancel(),n.onClose&&n.onClose()},className:s()((0,C.Z)({},x,null===(e=n.cancelButtonProps)||void 0===e?void 0:e.disabled)),children:n.cancelText}),!!n.confirmText&&(0,c.jsx)("div",{onClick:function(){n.onConfirm&&n.onConfirm(),n.onClose&&n.onClose()},className:s()((0,C.Z)({},x,null===(t=n.confirmButtonProps)||void 0===t?void 0:t.disabled)),children:n.confirmText})]})},y=function(n){return(0,c.jsx)(a,{open:n.open,closeOnDocumentClick:n.backdrop,onClose:n.onClose,children:(0,c.jsxs)(d,{children:[(0,c.jsx)(m,{title:n.title}),(0,c.jsx)(p,{content:n.content,children:n.children}),(0,c.jsx)(Z,{confirmText:n.confirmText,confirmButtonProps:n.confirmButtonProps,cancelText:n.cancelText,cancelButtonProps:n.cancelButtonProps,onConfirm:n.onConfirm,onCancel:n.onCancel,onClose:n.onClose})]})})},j=t(1413),g=(t(2791),t(4164)),b=["onConfirm","onCancel","onClose"];function _(n,e){var t=function(){var n=document.getElementById("popup-root");return n||((n=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(n)),n}(),r=document.createElement("div");function i(e){g.render((0,c.jsx)(n,(0,j.Z)({},function(n){var e=n.onConfirm,t=n.onCancel,r=n.onClose,c=(0,o.Z)(n,b),i=function(n){return n?function(){"function"===typeof n&&n(),a()}:a};return(0,j.Z)((0,j.Z)({},c),{},{onConfirm:i(e),onCancel:i(t),onClose:i(r)})}(e))),r)}function a(){i((0,j.Z)((0,j.Z)({},e),{},{open:!1}))}return t.appendChild(r),i((0,j.Z)((0,j.Z)({},e),{},{open:!0})),{destroy:a,update:function(n){i((0,j.Z)((0,j.Z)((0,j.Z)({},e),n),{},{open:!0}))}}}var k=Object.assign(y,{alert:function(n){return _(y,function(n){return(0,j.Z)((0,j.Z)({},n),{},{cancelText:null})}(n))},confirm:function(n){return _(y,function(n){return(0,j.Z)((0,j.Z)({},n),{},{cancelText:n.cancelText})}(n))},Dialog:d,Header:m,Body:p,Footer:Z})},4070:function(n,e,t){t.d(e,{Z:function(){return C}});var o=t(885),r="Profile_wrapper__r3jTF",c="Profile_avatar__xyyqj",i="Profile_username__2YFrb",a="Profile_chat__hJK6i",l="Profile_chat-unread__hBtH+",s=t(9411),u=t(7724),d=t(8820),f=t(2791),m=t(9713),v=JSON.parse('["#B9887D","#C7802D","#6A4C9C","#A96360","#828282","#336774","#B54434","#BF6766","#DB8E71","#B35C37","#00AA90","#577C8A","#904840","#8D742A","#58B2DC","#574C57"]'),p=t(184),C=function(){var n,e,t=(0,u.a)(),C=(0,d.aC)(),h=(0,m.ZG)(),x=(0,o.Z)(h,2),Z=x[0],y=x[1],j=function(){var n="avatar-color",e=parseInt("".concat(localStorage.getItem(n)),10);return e||(e=Math.round(1e3*Math.random()),localStorage.setItem(n,"".concat(e))),v[e%v.length]}(),g=C.user.email||"Unknown",b=C.user.name||"\u672a\u547d\u540d",_=(null===(n=y.data)||void 0===n||null===(e=n.me)||void 0===e?void 0:e.consults)||[];return(0,f.useEffect)((function(){C.user.id&&Z()}),[C.user.id,Z]),(0,p.jsxs)("div",{className:r,children:[(0,p.jsx)("div",{className:c,style:{background:j},children:g[0].toUpperCase()}),(0,p.jsx)("div",{className:i,children:b}),!C.user.clinic&&(0,p.jsxs)("div",{className:a,onClick:function(){C.user.clinic?t.toDoctorInbox():t.toMemberInbox()},children:[(0,p.jsx)(s.Z,{name:"Chat"}),_.length>1&&(null===_||void 0===_?void 0:_.map((function(n){var e;return null===n||void 0===n||null===(e=n.userInboxes)||void 0===e?void 0:e.some((function(n){return!(null!==n&&void 0!==n&&n.read)}))})))&&(0,p.jsx)("div",{className:l})]})]})}},8484:function(n,e,t){t.r(e),t.d(e,{default:function(){return M}});var o,r,c,i=t(4165),a=t(1413),l=t(5861),s=t(885),u=t(2791),d=t(2313),f=t(4070),m=t(7901),v=t(7724),p=t(8820),C=t(4433),h=t(2103),x=t(7432),Z=t(2284),y="Doctor_wrapper__HLY5y",j=t(168),g=t(7743),b=t(6586),_=t(4376),k={},P=(0,g.Ps)(o||(o=(0,j.Z)(["\n  query GetTopCategories {\n    topCategories {\n      name\n      secondCategories {\n        name\n        categories {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));var B=(0,g.Ps)(r||(r=(0,j.Z)(["\n  mutation UpdateClinicCategory($categories: [String]) {\n    updateClinicCategory(input: { categories: $categories }) {\n      id\n    }\n  }\n"])));var N=(0,g.Ps)(c||(c=(0,j.Z)(["\n  query GetMyClinic {\n    myClinic {\n      categories {\n        id\n        name\n      }\n    }\n  }\n"])));var T=t(184),D={title:"\u5bc4\u9001\u8a8d\u8b49\u90f5\u4ef6",content:"\u5c07\u5bc6\u78bc\u8a8d\u8b49\u4fe1\u5bc4\u81f3\u8a3b\u518a\u4fe1\u7bb1",confirm:"\u767c\u9001",cancel:"\u53d6\u6d88"},M=function(){var n,e,t,o=(0,v.a)(),r=(0,p.aC)(),c=(0,u.useState)(!1),j=(0,s.Z)(c,2),g=j[0],M=j[1],S=(0,u.useState)(!1),w=(0,s.Z)(S,2),F=w[0],O=w[1],A=(0,u.useState)(D),E=(0,s.Z)(A,2),I=E[0],U=E[1],H=function(n){var e=(0,a.Z)((0,a.Z)({},k),n);return b.t(P,e)}(),Q=(0,s.Z)(H,2),J=Q[0],V=Q[1],q=function(n){var e=(0,a.Z)((0,a.Z)({},k),n);return b.t(N,e)}(),G=(0,s.Z)(q,2),L=G[0],Y=G[1],$=function(n){var e=(0,a.Z)((0,a.Z)({},k),n);return _.D(B,e)}(),z=(0,s.Z)($,1)[0];return(0,u.useEffect)((function(){F&&J()}),[F]),V.error?(0,T.jsx)(h.Z.Error,{}):(0,T.jsxs)(T.Fragment,{children:[V.loading?(0,T.jsx)(h.Z.Loading,{}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.Z,{}),(0,T.jsxs)("div",{className:y,children:[(0,T.jsx)(d.Z,{variant:"secondary",onClick:function(){L({fetchPolicy:"no-cache"}),O(!0)},children:"\u5c08\u9577\u9805\u76ee"}),(0,T.jsx)(d.Z,{variant:"secondary",onClick:function(){return M(!0)},children:"\u4fee\u6539\u5bc6\u78bc"}),(0,T.jsx)(C.Z,{title:I.title,open:g,confirmText:I.confirm,cancelText:I.cancel,onConfirm:(0,l.Z)((0,i.Z)().mark((function n(){var e,t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null===r||void 0===r||null===(e=r.user)||void 0===e||!e.email){n.next=5;break}return n.next=4,(0,Z.m5)(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.email);case 4:U((0,a.Z)((0,a.Z)({},I),{},{title:"\u767c\u9001\u6210\u529f",content:"\u8acb\u81f3\u8a3b\u518a\u4fe1\u7bb1\u67e5\u6536\u65b0\u5bc6\u78bc",confirm:"",cancel:"\u95dc\u9589"}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),U((0,a.Z)((0,a.Z)({},I),{},{title:"\u767c\u9001\u5931\u6557",content:"\u8acb\u91cd\u65b0\u767c\u9001",confirm:"",cancel:"\u95dc\u9589"}));case 10:M(!0);case 11:case"end":return n.stop()}}),n,null,[[0,7]])}))),onCancel:function(){U(D),M(!1)},children:I.content}),(0,T.jsx)("div",{}),(0,T.jsx)(d.Z,{variant:"text",onClick:function(){r.signOut(),o.toHome()},children:"\u767b\u51fa"}),(0,T.jsx)(x.Z,{open:F,onClose:function(){return O(!1)},getValue:function(n){z({variables:{categories:n.map((function(n){return n.id||""}))}})},topCategoriesQuery:V,defaultValue:(null===Y||void 0===Y||null===(n=Y.data)||void 0===n||null===(e=n.myClinic)||void 0===e||null===(t=e.categories)||void 0===t?void 0:t.map((function(n){return{id:(null===n||void 0===n?void 0:n.id)||"",name:(null===n||void 0===n?void 0:n.name)||""}})))||[]})]})]}),(0,T.jsx)(m.Z.Clinic,{})]})}},6586:function(n,e,t){t.d(e,{t:function(){return s}});var o=t(9388),r=t(2791),c=t(3124),i=t(6578),a=t(5046),l=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function s(n,e){var t=(0,i.A)((0,a.x)(e&&e.client),n),s=(0,r.useRef)(),u=s.current?(0,c.J)(e,s.current):e,d=t.useQuery((0,o.pi)((0,o.pi)({},u),{skip:!s.current})),f=d.observable.options.initialFetchPolicy||t.getDefaultFetchPolicy(),m=Object.assign(d,{called:!!s.current}),v=(0,r.useMemo)((function(){for(var n={},e=function(e){var o=m[e];n[e]=function(){return s.current||(s.current=Object.create(null),t.forceUpdate()),o.apply(this,arguments)}},o=0,r=l;o<r.length;o++){e(r[o])}return n}),[]);return Object.assign(m,v),[(0,r.useCallback)((function(n){s.current=n?(0,o.pi)((0,o.pi)({},n),{fetchPolicy:n.fetchPolicy||f}):{fetchPolicy:f};var e=t.asyncUpdate().then((function(n){return Object.assign(n,v)}));return e.catch((function(){})),e}),[]),m]}}}]);
//# sourceMappingURL=309.d8837636.chunk.js.map