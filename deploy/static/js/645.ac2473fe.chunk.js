"use strict";(self.webpackChunkpsbeauty=self.webpackChunkpsbeauty||[]).push([[645],{2313:function(n,e,i){i.d(e,{Z:function(){return u}});var t=i(1413),l=i(4942),r=i(4925),c=(i(2791),i(1694)),o=i.n(c),a={wrapper:"Button_wrapper__GqKsN",primary:"Button_primary__9MLUH",secondary:"Button_secondary__sUGsj",selected:"Button_selected__NZP20",text:"Button_text__Rk+Tr",transparent:"Button_transparent__puDsp"},d=i(184),s=["variant","className","selected","children","eventKey","onClick"],u=function(n){var e=n.variant,i=void 0===e?"primary":e,c=n.className,u=n.selected,v=void 0!==u&&u,m=n.children,f=void 0===m?"Click":m,_=n.eventKey,p=n.onClick,C=(0,r.Z)(n,s);return(0,d.jsx)("button",(0,t.Z)((0,t.Z)({className:o()(a.wrapper,a[i],(0,l.Z)({},a.selected,v),c),style:C.style,onClick:function(n){p&&p(n,{eventKey:_})}},C),{},{children:f}))}},4719:function(n,e,i){i.d(e,{Z:function(){return s}});var t=i(1413),l=i(4925),r="Backdrop_wrapper__LB3Yk",c=i(1694),o=i.n(c),a=i(184),d=["style"],s=function(n){var e=n.style,i=void 0===e?{}:e,c=(0,l.Z)(n,d);return(0,a.jsx)("div",{className:o()(r,c.className),style:(0,t.Z)({},i),children:c.children})}},6427:function(n,e,i){i.d(e,{Z:function(){return h}});var t=i(1413),l=i(4942),r=i(4925),c="Header_wrapper__e2tXX",o="Header_large__tDbDa",a="Header_small__U9DHq",d="Header_back__Chgho",s="Header_title__87Ruw",u="Header_has-back__h6eqr",v=i(1694),m=i.n(v),f=i(9411),_=i(6871),p=i(184),C=["style"],h=function(n){var e,i=n.style,v=void 0===i?{}:i,h=(0,r.Z)(n,C),x=(0,_.s0)(),g=(0,_.UO)().text;return(0,p.jsxs)("div",{className:m()(c,h.className,(e={},(0,l.Z)(e,o,h.title||h.children),(0,l.Z)(e,a,!h.title&&!h.leftArrow),e)),style:(0,t.Z)({},v),children:[h.leftArrow&&(0,p.jsx)("div",{onClick:function(){return h.redirect?h.redirect():x(g?-2:-1)},children:(0,p.jsx)(f.Z,{className:d,name:"LeftArrow"})}),h.title?(0,p.jsx)("div",{className:m()(s,(0,l.Z)({},u,h.leftArrow)),children:h.title}):h.children]})}},687:function(n,e,i){i.d(e,{Z:function(){return a}});var t="Banner_banner__IONV+",l="Banner_slide__EI7xM",r=i(7724),c=i(8788),o=i(184),a=function(n){var e=n.height,i=void 0===e?"132px":e,a=n.images,d=void 0===a?[]:a,s=(0,r.a)();return(0,o.jsxs)("div",{className:t,children:[0===d.length&&(0,o.jsx)("div",{className:l,style:{height:i,background:"#aab0b233"}}),(0,o.jsx)(c.l,{autoplay:!0,autoplayInterval:5e3,wrapAround:!0,withoutControls:!0,cellSpacing:12,dragThreshold:.1,children:null===d||void 0===d?void 0:d.map((function(n){return(0,o.jsx)("div",{className:l,style:{height:i},onClick:function(){n.clinicId&&("clinic"===n.redirectType?s.toClinicInner({id:n.clinicId,tab:"info"}):"case"===n.redirectType&&n.targetId?s.toClinicCase({clinicId:n.clinicId,caseId:n.targetId}):"doctor"===n.redirectType?s.toClinicInner({id:n.clinicId,tab:"medical-team"}):"activity"===n.redirectType&&n.targetId&&s.toClinicActivity({clinicId:n.clinicId,activityId:n.targetId}))},children:n&&(0,o.jsx)("img",{src:null===n||void 0===n?void 0:n.image,width:"100%",height:"100%"})},n.clinicId)}))})]})}},897:function(n,e,i){i.d(e,{Z:function(){return E}});var t,l,r=i(885),c=i(2791),o="CaseCard_wrapper__dUXdB",a="CaseCard_title__SQCWW",d="CaseCard_collect-block__u8Sal",s="CaseCard_bookmark-fill__jUiSM",u="CaseCard_bookmark-simple__hWI99",v="CaseCard_amount__zwm+S",m="CaseCard_clinic__lyURc",f="CaseCard_content__aYMVJ",_="CaseCard_image__oTTZQ",p="CaseCard_tags__7Hmha",C=i(9411),h=i(8163),x=i(8820),g=i(4874),j=i(1413),I=i(168),Z=i(7743),y=i(4376),b={},N=(0,Z.Ps)(t||(t=(0,I.Z)(["\n  mutation CollectCase($caseId: String!) {\n    collectCase(input: { caseId: $caseId }) {\n      userId\n      collectedCount\n    }\n  }\n"])));var k=(0,Z.Ps)(l||(l=(0,I.Z)(["\n  mutation RemoveCollectedCase($caseId: String!) {\n    removeCollectedCase(input: { caseId: $caseId }) {\n      userId\n      collectedCount\n    }\n  }\n"])));var S=i(184),w="case-card-width",E=function(n){var e,i=Object.assign({},n),t=(0,h.Z)(),l=(0,x.aC)(),I=(0,c.useRef)(null),Z=(0,c.useState)(parseInt(sessionStorage.getItem(w)||"",10)||0),E=(0,r.Z)(Z,2),M=E[0],R=E[1],K=(0,c.useState)(!1),B=(0,r.Z)(K,2),A=B[0],T=B[1],U=(0,c.useState)(i.amount),D=(0,r.Z)(U,2),H=D[0],L=D[1],O=(0,g.Z)({}),P=O.containerRef,V=O.isVisible;(0,c.useLayoutEffect)((function(){I.current&&(R(I.current.clientWidth),sessionStorage.setItem(w,"".concat(I.current.clientWidth)))}),[]),(0,c.useEffect)((function(){i.last&&V&&i.fetchMore&&i.fetchMore()}),[i.last,i.fetchMore,V]);var $=function(n){var e=(0,j.Z)((0,j.Z)({},b),n);return y.D(N,e)}({variables:{caseId:i.caseId},onCompleted:function(n){var e;T(!0),L(null===(e=n.collectCase)||void 0===e?void 0:e.collectedCount)}}),q=(0,r.Z)($,1)[0],W=function(n){var e=(0,j.Z)((0,j.Z)({},b),n);return y.D(k,e)}({variables:{caseId:i.caseId},onCompleted:function(n){var e;T(!1),L(null===n||void 0===n||null===(e=n.removeCollectedCase)||void 0===e?void 0:e.collectedCount)}}),X=(0,r.Z)(W,1)[0];return(0,c.useEffect)((function(){T(i.isCollected)}),[i.isCollected]),(0,S.jsxs)("div",{ref:i.last?P:null,className:o,style:i.style,onClick:function(){return t.toClinicCase({clinicId:i.clinicId,caseId:i.caseId})},children:[(0,S.jsx)("div",{className:a,children:i.title}),(0,S.jsx)("div",{className:m,children:i.clinic}),(0,S.jsx)("div",{className:f,dangerouslySetInnerHTML:{__html:i.introduction||""}}),(0,S.jsx)("div",{className:_,style:{height:M},ref:I,children:(0,S.jsx)("img",{src:i.image})}),(0,S.jsx)("div",{className:p,children:null===(e=i.tags)||void 0===e?void 0:e.map((function(n,e){return(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:"#"}),n]},"tag-".concat(e))}))}),(0,S.jsxs)("div",{className:d,onClick:function(n){if(n.stopPropagation(),!l.user.id)return t.toSignIn();A?X():q()},children:[A?(0,S.jsx)(C.Z,{name:"BookmarkFill",className:s}):(0,S.jsx)(C.Z,{name:"BookmarkSimple",className:u}),(0,S.jsx)("div",{className:v,children:H})]})]})}},2333:function(n,e,i){i.d(e,{k9:function(){return s}});var t,l=i(1413),r=i(168),c=i(7743),o=i(6586),a={},d=(0,c.Ps)(t||(t=(0,r.Z)(["\n  query GetCollectedCase {\n    me {\n      userCollectedCases {\n        id\n      }\n    }\n  }\n"])));function s(n){var e=(0,l.Z)((0,l.Z)({},a),n);return o.t(d,e)}},4874:function(n,e,i){var t=i(885),l=i(2791);e.Z=function(n){var e=n.root,i=void 0===e?null:e,r=n.rootMargin,c=void 0===r?"0px":r,o=n.threshold,a=void 0===o?1:o,d=(0,l.useState)(!1),s=(0,t.Z)(d,2),u=s[0],v=s[1],m=(0,l.useRef)(null),f=(0,l.useCallback)((function(n){m.current=n,v(!!n)}),[]),_=(0,l.useState)(!1),p=(0,t.Z)(_,2),C=p[0],h=p[1];return(0,l.useEffect)((function(){if(u){var n=new IntersectionObserver((function(n){var e=(0,t.Z)(n,1)[0];h(e.isIntersecting)}),{root:i,rootMargin:c,threshold:a});return(null===m||void 0===m?void 0:m.current)&&n.observe(m.current),function(){(null===m||void 0===m?void 0:m.current)&&n.unobserve(m.current)}}}),[i,c,a,u]),{containerRef:f,isVisible:C}}},4730:function(n,e,i){i.r(e),i.d(e,{default:function(){return H}});var t,l=i(4942),r=i(885),c=i(2791),o="ClinicInner_wrapper__EU8Xf",a="ClinicInner_content__v+lxv",d="ClinicInner_contact__XnDXc",s="ClinicInner_information__ne68W",u="ClinicInner_block__vU1QU",v="ClinicInner_case__S6TnA",m="ClinicInner_reply__mrpRV",f="ClinicInner_categories__MRDm0",_="ClinicInner_title__LsUQY",p="ClinicInner_more__VRY4W",C="ClinicInner_show__FIXRo",h="ClinicInner_button__lLdNB",x="ClinicInner_chat__PJVe1",g=i(1694),j=i.n(g),I=i(9411),Z=i(2313),y=i(897),b=i(687),N=i(8163),k=i(2103),S=i(8820),w=i(9301),E=i(2333),M=i(6871),R=i(1413),K=i(168),B=i(7743),A=i(4376),T={},U=(0,B.Ps)(t||(t=(0,K.Z)(['\n  mutation consultClinic($input: String) {\n    consultClinic(\n      input: { clinicId: $input, days: 90, subject: "\u4e00\u5c0d\u4e00\u8aee\u8a62", content: "OneOnOne" }\n    ) {\n      topicId\n    }\n  }\n'])));var D=i(184),H=function(){var n,e,i,t,g,K,B,H,L,O,P,V=(0,N.Z)(),$=(0,S.aC)(),q=(0,w.useClinicInnerContext)().query.data,W=(0,E.k9)({fetchPolicy:"no-cache"}),X=(0,r.Z)(W,2),Q=X[0],G=X[1],F=(0,M.UO)().id,Y=function(n){var e=(0,R.Z)((0,R.Z)({},T),n);return A.D(U,e)}(),J=(0,r.Z)(Y,1)[0],z=(0,c.useState)(!1),nn=(0,r.Z)(z,2),en=nn[0],tn=nn[1],ln=(0,c.useState)(!1),rn=(0,r.Z)(ln,2),cn=rn[0],on=rn[1],an=(0,c.useRef)(null);(0,c.useLayoutEffect)((function(){var n,e,i=(null===(n=an.current)||void 0===n?void 0:n.clientHeight)||0,t=(null===(e=an.current)||void 0===e?void 0:e.scrollHeight)||0;i&&t>i&&on(!0)}),[]);var dn=(0,c.useMemo)((function(){var n,e,i;return null===q||void 0===q||null===(n=q.clinic)||void 0===n||null===(e=n.images)||void 0===e||null===(i=e.map((function(n){return{image:(null===n||void 0===n?void 0:n.image)||"",clinicId:(null===n||void 0===n?void 0:n.id)||"",targetId:(null===n||void 0===n?void 0:n.targetId)||"",redirectType:null===n||void 0===n?void 0:n.redirectType,sort:(null===n||void 0===n?void 0:n.sort)||0}})))||void 0===i?void 0:i.sort((function(n,e){return n.sort-e.sort}))}),[q]),sn=(0,c.useCallback)((function(){$.user.id?J({variables:{input:F||""},onCompleted:function(n){var e;V.toChatroom({id:(null===(e=n.consultClinic)||void 0===e?void 0:e.topicId)||""})}}):V.toSignIn()}),[$]);return(0,c.useEffect)((function(){$.user.id&&Q()}),[$.user.id,Q]),G.loading?(0,D.jsx)(k.Z.Loading,{}):G.error?(0,D.jsx)(k.Z.Error,{}):(0,D.jsxs)("div",{className:o,children:[(0,D.jsx)(b.Z,{height:"214px",images:dn}),(0,D.jsxs)("div",{className:a,children:[(0,D.jsxs)("div",{className:d,children:[(0,D.jsx)(I.Z,{name:"mapPin"}),(0,D.jsxs)("span",{children:[null===q||void 0===q||null===(n=q.clinic)||void 0===n?void 0:n.county,null===q||void 0===q||null===(e=q.clinic)||void 0===e?void 0:e.town,null===q||void 0===q||null===(i=q.clinic)||void 0===i?void 0:i.address]})]}),(0,D.jsxs)("div",{className:d,children:[(0,D.jsx)(I.Z,{name:"phone"}),(0,D.jsx)("span",{children:null===q||void 0===q||null===(t=q.clinic)||void 0===t?void 0:t.phone})]}),(0,D.jsxs)("div",{className:d,children:[(0,D.jsx)(I.Z,{name:"globeSimple"}),(0,D.jsx)("span",{children:null===q||void 0===q||null===(g=q.clinic)||void 0===g?void 0:g.web})]}),(0,D.jsxs)("div",{className:s,children:[(0,D.jsxs)("div",{className:v,children:[(0,D.jsx)("div",{className:u}),"\u6848\u4f8b\u6578 ",(0,D.jsx)("span",{children:null===q||void 0===q||null===(K=q.clinic)||void 0===K?void 0:K.caseCount})]}),(0,D.jsxs)("div",{className:m,children:[(0,D.jsx)("div",{className:u}),"\u56de\u8986\u6578 ",(0,D.jsx)("span",{children:null===q||void 0===q||null===(B=q.clinic)||void 0===B?void 0:B.consultReplyCount})]}),(0,D.jsxs)("div",{className:f,children:[(0,D.jsx)("div",{className:u}),(0,D.jsx)("div",{className:_,children:"\u5c08\u9577\u9805\u76ee"}),(0,D.jsx)("div",{className:j()(a,(0,l.Z)({},p,en)),ref:an,children:null===q||void 0===q||null===(H=q.clinic)||void 0===H||null===(L=H.categories)||void 0===L?void 0:L.map((function(n){return(null===n||void 0===n?void 0:n.name)||""})).join("\u3001")}),cn&&(0,D.jsx)("div",{className:C,onClick:function(){return tn(!en)},children:en?"\u986f\u793a\u66f4\u5c11":"...\u986f\u793a\u66f4\u591a"})]})]})]}),null===q||void 0===q||null===(O=q.clinic)||void 0===O||null===(P=O.cases)||void 0===P?void 0:P.map((function(n){var e,i,t,l,r;return(0,D.jsx)(y.Z,{amount:null===n||void 0===n?void 0:n.collectedCount,isCollected:(null===G||void 0===G||null===(e=G.data)||void 0===e||null===(i=e.me)||void 0===i||null===(t=i.userCollectedCases)||void 0===t?void 0:t.some((function(e){return(null===e||void 0===e?void 0:e.id)===(null===n||void 0===n?void 0:n.id)})))||!1,title:(null===n||void 0===n?void 0:n.title)||"",clinic:(null===q||void 0===q||null===(l=q.clinic)||void 0===l?void 0:l.name)||"",clinicId:F||"",introduction:(null===n||void 0===n?void 0:n.description)||"",image:(null===n||void 0===n?void 0:n.image)||"",tags:null===n||void 0===n||null===(r=n.categories)||void 0===r?void 0:r.map((function(n){return(null===n||void 0===n?void 0:n.name)||""})),caseId:(null===n||void 0===n?void 0:n.id)||"",last:!1},null===n||void 0===n?void 0:n.id)})),!$.user.clinic&&(0,D.jsxs)(Z.Z,{className:h,onClick:sn,children:[(0,D.jsx)(I.Z,{name:"chat",className:x}),"\u4e00\u5c0d\u4e00\u533f\u540d\u8aee\u8a62"]})]})}},9301:function(n,e,i){i.r(e),i.d(e,{default:function(){return k},useClinicInnerContext:function(){return N}});var t,l=i(885),r=i(2791),c=i(6871),o=i(8820),a=i(6427),d=i(4719),s=i(2313),u=i(1413),v="ButtonGroup_outer__42i6k",m=i(184),f=function(n){var e=(0,r.useState)(n.defaultActiveKey),i=(0,l.Z)(e,2),t=i[0],c=i[1],o=function(e,i){var t=i.eventKey;t&&(c(t),n.onSelect&&n.onSelect(e,{eventKey:t}))};return(0,r.useEffect)((function(){c(n.defaultActiveKey)}),[n.defaultActiveKey]),(0,m.jsx)("div",{className:v,children:r.Children.map(n.children,(function(n){if(r.isValidElement(n))return n.type===s.Z?r.cloneElement(n,(0,u.Z)((0,u.Z)({},n.props),{},{variant:"secondary",selected:n.props.eventKey===t,onClick:o})):null}))})},_=i(8163),p="ClinicSwitch_wrapper__cQK8m",C="info",h=function(){var n=(0,_.Z)(),e=(0,c.bS)("/clinic/:id/inner/:tab");return null!==e&&void 0!==e&&e.params.tab?(0,m.jsx)("div",{className:p,children:(0,m.jsxs)(f,{defaultActiveKey:(null===e||void 0===e?void 0:e.params.tab)||C,onSelect:function(i,t){var l=t.eventKey;n.toClinicInner({id:e.params.id||"",tab:"".concat(l)})},children:[(0,m.jsx)(s.Z,{eventKey:"info",children:"\u8a3a\u6240"}),(0,m.jsx)(s.Z,{eventKey:"introduction",children:"\u4ecb\u7d39"}),(0,m.jsx)(s.Z,{eventKey:"medical-team",children:"\u5718\u968a"}),(0,m.jsx)(s.Z,{eventKey:"activities",children:"\u6d3b\u52d5"})]})}):(0,m.jsx)(c.Fg,{to:C,replace:!0})},x=i(7901),g=i(168),j=i(7743),I=i(6586),Z={},y=(0,j.Ps)(t||(t=(0,g.Z)(["\n  query GetClinic($id: String!) {\n    clinic(id: $id) {\n      name\n      county\n      town\n      address\n      phone\n      web\n      consultReplyCount\n      caseCount\n      description\n      categories {\n        name\n      }\n      cases {\n        id\n        description\n        title\n        image\n        collectedCount\n        categories {\n          id\n          name\n        }\n      }\n      images {\n        id\n        image\n        redirectType\n        targetId\n        sort\n      }\n      doctors {\n        id\n        name\n        resumes\n        photo\n        title\n        expertise\n      }\n      activities {\n        id\n        subject\n        content\n        createdAt\n        image\n      }\n    }\n  }\n"])));var b=i(2103);function N(){return(0,c.bx)()}var k=function(){var n,e,i,t=(0,o.aC)(),s=(0,c.s0)(),v=(0,c.bS)("/clinic/:id/activity/:activityId"),f=(0,c.UO)().id,_=function(n){var e=(0,u.Z)((0,u.Z)({},Z),n);return I.t(y,e)}(),p=(0,l.Z)(_,2),C=p[0],g=p[1];return(0,r.useEffect)((function(){null!==v&&void 0!==v&&v.params.activityId||C({variables:{id:f||""}})}),[null===v||void 0===v?void 0:v.params.activityId,C,f]),null!==g&&void 0!==g&&g.loading||null===g||void 0===g||!g.data?(0,m.jsx)(b.Z.Loading,{}):g.error?(0,m.jsx)(b.Z.Error,{}):null!==v&&void 0!==v&&v.params.activityId?(0,m.jsx)(c.j3,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.Z,{leftArrow:!(null!==t&&void 0!==t&&null!==(n=t.user)&&void 0!==n&&n.clinic),title:(null===g||void 0===g||null===(e=g.data)||void 0===e||null===(i=e.clinic)||void 0===i?void 0:i.name)||"",redirect:function(){return s("/clinic")}}),(0,m.jsxs)(d.Z,{style:{paddingBottom:"120px"},children:[(0,m.jsx)(h,{}),(0,m.jsx)(c.j3,{context:{query:g}}),t.user.clinic?(0,m.jsx)(x.Z.Clinic,{}):(0,m.jsx)(x.Z,{})]})]})}},4376:function(n,e,i){i.d(e,{D:function(){return s}});var t=i(9388),l=i(2791),r=i(3124),c=i(5970),o=i(2364),a=i(9484),d=i(5046);function s(n,e){var i=(0,d.x)(null===e||void 0===e?void 0:e.client);(0,o.Vp)(n,o.n_.Mutation);var s=(0,l.useState)({called:!1,loading:!1,client:i}),u=s[0],v=s[1],m=(0,l.useRef)({result:u,mutationId:0,isMounted:!0,client:i,mutation:n,options:e});Object.assign(m.current,{client:i,options:e,mutation:n});var f=(0,l.useCallback)((function(n){void 0===n&&(n={});var e=m.current,i=e.client,l=e.options,o=e.mutation,d=(0,t.pi)((0,t.pi)({},l),{mutation:o});m.current.result.loading||d.ignoreResults||v(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:i});var s=++m.current.mutationId,u=(0,r.J)(d,n);return i.mutate(u).then((function(e){var t,l,r,o=e.data,d=e.errors,f=d&&d.length>0?new a.c({graphQLErrors:d}):void 0;if(s===m.current.mutationId&&!u.ignoreResults){var _={called:!0,loading:!1,data:o,error:f,client:i};m.current.isMounted&&!(0,c.D)(m.current.result,_)&&v(m.current.result=_)}return null===(l=null===(t=m.current.options)||void 0===t?void 0:t.onCompleted)||void 0===l||l.call(t,e.data),null===(r=n.onCompleted)||void 0===r||r.call(n,e.data),e})).catch((function(e){var t,l,r,o;if(s===m.current.mutationId&&m.current.isMounted){var a={loading:!1,error:e,data:void 0,called:!0,client:i};(0,c.D)(m.current.result,a)||v(m.current.result=a)}if((null===(t=m.current.options)||void 0===t?void 0:t.onError)||u.onError)return null===(r=null===(l=m.current.options)||void 0===l?void 0:l.onError)||void 0===r||r.call(l,e),null===(o=n.onError)||void 0===o||o.call(n,e),{data:void 0,errors:e};throw e}))}),[]),_=(0,l.useCallback)((function(){v({called:!1,loading:!1,client:i})}),[]);return(0,l.useEffect)((function(){return m.current.isMounted=!0,function(){m.current.isMounted=!1}}),[]),[f,(0,t.pi)({reset:_},u)]}}}]);
//# sourceMappingURL=645.ac2473fe.chunk.js.map